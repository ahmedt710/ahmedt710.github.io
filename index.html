<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FIFA SBC Bruteforcer</title>
</head>
<body>
    <h1>⚡ SBC Bruteforcer Tool</h1>

    <h2>Enter Your Inventory</h2>
    <textarea id="inventoryInput" rows="10" cols="50" placeholder="Example: 88: 3, 89: 2, 90: 1"></textarea>

    <h2>Enter Squad Requirements</h2>
    <textarea id="sbcInput" rows="5" cols="50" placeholder="Example: 90: 2, 89: 1"></textarea>

    <br><br>
    <button onclick="submitToLambda()">Submit and Solve 🔥</button>

    <h2>Results:</h2>
    <pre id="results"></pre>

    <script>
        async function submitToLambda() {
            const inventoryText = document.getElementById('inventoryInput').value;
            const sbcText = document.getElementById('sbcInput').value;
            const resultsDiv = document.getElementById('results');

            // Parse inventory and SBC input
            const inventory = parseInputToJSON(inventoryText);
            const sbcRequirements = parseInputToJSON(sbcText);

            console.log("Parsed Inventory:", inventory);
            console.log("Parsed SBC Requirements:", sbcRequirements);

            const payload = {
                inventory: inventory,
                sbc_requirements: sbcRequirements
            };

            resultsDiv.innerHTML = "Submitting... please wait 🔄";

            try {
                const response = await fetch("https://your-api-id.amazonaws.com/build-squad", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status ${response.status}`);
                }

                const result = await response.json();
                console.log("Lambda Response:", result);

                resultsDiv.innerHTML = JSON.stringify(result, null, 2);
            } catch (error) {
                console.error("Error sending to Lambda:", error);
                resultsDiv.innerHTML = "❌ Error: " + error.message;
            }
        }

        function parseInputToJSON(text) {
            const lines = text.split(",");
            const obj = {};
            lines.forEach(line => {
                const parts = line.split(":").map(x => x.trim());
                if (parts.length === 2) {
                    const rating = parseInt(parts[0]);
                    const count = parseInt(parts[1]);
                    if (!isNaN(rating) && !isNaN(count)) {
                        obj[rating] = count;
                    }
                }
            });
            return obj;
        }
    </script>
</body>
</html>
